# Weather App using Node.js and Darknet API

জাভাস্ক্রিপ্ট রানটাইম নোডজেস এবং ফ্রি এপিয়াই ডার্কনেট ব্যবহার করে এই সিংগেল পেজ ওয়েদার এপটি বানানো হয়েছে 

## Enviroment Setup

শুরু করার জন্য আমাদের যা লাগবে তা হচ্ছে

* [Node.js](https://nodejs.org/en/download/)

* [Visual Studio Code](https://code.visualstudio.com/download)

### Prerequisites

যেহেতু খুবই সহজ একটি এপ বানানো হয়েছে সেহেতু বেশী কিছু আমাদের না জানলেও চলবে । তাও, HTML, CSS এবং সামান্য জাভাস্ক্রিপ্ট জানা থাকলে ভালো
না থাকলেও সমস্যা নেই ।

### ধাপ ১

সবার প্রথমে আমাদের যেটা করতে হবে সেটা হচ্ছে আমাদের পছন্দের ডিরেক্টরিতে একটি ফোল্ডার খুলতে হবে ।
এটাই হবে সেই ফোল্ডার যেখানে আমাদের সকল কোড থাকবে । ধরি, ফোল্ডারের নাম, **SimpleProject**

উইন্ডোজের পাওয়ারশেলে আমরা যদি ফোল্ডারটা বানাতে চাই তাহলে আমরা এইভাবে বানাতে পারি

```
mkdir SimpleProject
```
তারপর, আমরা আমাদের ওয়ার্কিং ডিরেক্টরি চেঞ্জ করে আমাদের নতুন বানানো ফোল্ডারে প্রবেশ করবো ।
পাওয়ারশেল দিয়ে ওয়ার্কিং ডিরেক্টরি চেঞ্জ করতে

```
cd SimpleProject
```

এখন আমরা **SimpleProject** ফোল্ডারের ভেতর । এখন, কোনো ধরণের কোড শুরু করার আগে আমাদের যেটা করতে হবে সেটা হচ্ছে প্রয়োজনীয় ফোল্ডার গুলো তৈরী করে রাখতে হবে ।

আমরা এই কাজটি ফাইল এক্সপ্লোরারে গিয়েও করতে পারি অথবা আমাদের পাওয়ারশেল ব্যবহার করেও করতে পারি । আমি পাওয়াশেল ব্যবহার করে করবো

```
mkdir public, routes, views
```

উপরোক্ত লাইনের মাধ্যমে আমি তিনটি ফোল্ডার তৈরী করলাম । যাদের কাজ আমরা পরবর্তী সেগমেন্টে জানবো

###  ফোল্ডার পরিচিতি

**public** :- এই ফোল্ডারের কাজ হচ্ছে যেকোনো ধরণের স্ট্যাটিক জিনিসপাতি ধারণ করা । যেমন, সি এস এস ফাইল, যেকোনো ইমেজ ইত্যাদি । 

**routes** :- এই ফোল্ডারে আমাদের সকল এন্ডপয়েন্ট (**Endpoint**) এর কোড থাকবে । এন্ড পয়েন্ট ওয়েবডেভেলপমেন্টে খুব দরকারী একটা জিনিস । আমরা যখন একটা এন্ডপয়েন্ট বানাবো তখন আমরা জানবো এটি কি এবং এটির কাজ কি । 

**views** :- এই ফোল্ডারে থাকবে আমাদের ফ্রন্ট এন্ডের ফাইলগুলা । আমরা এই প্রজেক্টে হ্যান্ডেলবার টেম্পপ্লেট ইঞ্জিনটি ব্যবহার করবো । হ্যান্ডেলবার কি অথবা টেমপ্লেট ইঞ্জিনইবা কি তা আমরা পরে জানবো

### আমাদের বন্ধু NPM

আমরা আগেই জেনেছি যে, নোডজেস কোনো ল্যাঙ্গুয়েজ না, না কোনো ফ্রেমওয়ার্ক অথবা লাইব্রেরী । নোড হচ্ছে সিমপ্লি একটা রানটাইম এনভাইরোমেন্ট যেটা আমাদের ব্যাকেন্ডে জাভাস্ক্রিপ্ট রান করতে সাহায্য করে । এখন একটা রানটাইম এন্ডভাইরোমেন্টের কাজ কিন্তু এন্ডপয়েন্ট বানানো না, নয় HTML পেজ সার্ভ করা । তাহলে আমরা কিভাবে ওয়েবডেভেলপ মেন্ট করবো যেখানে নোড জেস আমাদের কোনো ধরণের সহায়তা করছে না ।

হুম...

এই ক্রান্তিকালে আমাদের বিপদ থেকে উদ্ধার করতে আসবে আমাদের বন্ধু NPM অথবা Node Package Manager ।
সবার প্রশ্ন থাকতে পারে, আরেহ ভাই, এই নোড প্যাকেজ ম্যানেজার আবার কি বা কেনো ।

 যেহেতু আমাদের নোডজেস আমাদের কোনো ধরণের কাজে সহায়তা করতে পারছে না(**আহাম্মক একটা** ), সেহেতু আমাদের বাইরের হেল্পিং হ্যান্ড লাগবে, যারা এইধরণের কাজ পারে । সেইসব প্যাকেজদের এক জায়গায় এনেছে একটা মার্কেটপ্লেস(সর্ট অফ) যার নাম হচ্ছে NPM  । 

এক কথায় npm হচ্ছে একটা ফ্রি মার্কেট যেখান থেকে আমরা যেকোনো প্যাকেজ নিয়ে কাজ করতে পারি । এখন আমাদের npm আলাদা করে ইন্সটল করতে হবেনা । কারণ, আমরা যখন নোডজেস ইন্সটল করেছি তখন কাবাবের হাড্ডি হিসেবে NPM ও চলে এসেছে । পাওয়ারশেলে এই কমান্ডটি লিখে আমরা একই সাথে NPM আছে কিনা এবং ভার্সন নাম্বার কতো সেটা নিশ্চিত হতে পারি

```
npm -v
```


### কাজ সহজ করবে NPM


কোনো ভুংভাং কথা না বলে, পাওয়ারশেলে এই কোডটা লিখুন আর এন্টার প্রেস করুন । কি হচ্ছে পরে বলছি ।


```
npm init
```

init হচ্ছে initialization এর সংক্ষেপ রুপ । এই কমান্ডের মানে হচ্ছে আপনি চাচ্ছেন এই ফোল্ডারে npm তার ঘাটি গেড়ে বসুক । এখন, এই কমান্ড দিলেই কাজ হবেনা । লক্ষ্য করে দেখুন, এই কমান্ড দিয়ে এন্টার প্রেস করলে সে আপনাকে কিছু প্রশ্ন করছে । কিছু উত্তর দিতে হবে না । এন্টার চাপুন । শুধুমাত্র, entry point(index.js) :- এইটায় লিখুন,  **app.js**  । ব্যাস, এরপর এন্টার চাপতে থাকুন যতক্ষণ না তার কাজ শেষ হচ্ছে । কাজ শেষ হলে খেয়াল করবেন আপনার ফোল্ডারের খোমা চেঞ্জ হয়ে গেছে । কোত্থেকে না কোত্থেকে **node_modules** নামক একটা ফোল্ডার চলে এসেছে, এবং অদ্ভুত এক্সটেনশনওয়ালা **package.json** নামক এক ফাইল চলে এসেছে (উফফ কতো প্যারা)


###  ডিসকাউন্ট আমলনামা package.json


package.json ফাইলটা আমরা ওপেন করি । দেখি কি এমন আছে এর ভেতর । ওমা!! এতো দেখি মানুষের ভাষা । আচ্ছা ভালো । পড়তে থাকি ।

শুরুতে আছে প্রজেক্টের নাম, তারপর প্রজেক্টের ভার্সন, তারপর ডেসক্রিপশন, তারপর আছে ডিপেন্ডেন্সি । এইতো আসল খেলা শুরু । এই যে ডিপেন্ডেন্সির খালি ঘরটা । এই খালি ঘরটা আমরা শীঘ্রই ফিল আপ করবো । আমরা যখন npm(আমাদের ফ্রি মার্কেট)  থেকে কোনো প্যাকেজ আমাদের প্রজেক্টে ইনক্লুড করবো তখন সেই প্যাকেজের নাম এবং ভার্সন এই **ডিপেন্ডেন্সির** ভেতর গিয়ে জমা হতে থাকবে । কেনো সেটা ইম্পোর্টেন্ট । আমরা সেটা পরে বুঝবো ।


### আমাদের প্রথম প্যাকেজ এক্সপ্রেস.JS


শুরুতেই বলেছি নোড জেস শুধু সার্ভারে জাভাস্ক্রিপ্ট রান করতে সাহায্য করবে । আর কিছুই না । সো আমাদের তো একটা ওয়েবফ্রেমওয়ার্ক দরকার । নাকি? আমরা ওয়েবফ্রেমওয়ার্ক হিসেবে ব্যবহার করবো expressjs নামক বহুল ব্যবহৃত এক ফ্রেমওয়ার্ক  । ভুংভাং কথা বাদ দিয়ে, এই কোড পাওয়ারশেলে লিখি আর এন্টারচাপ দেই 


```
npm install express
```


আমরা কি করলাম? আমরা সিমপ্লি আমাদের npm কে বললাম express ইন্সটল করো । It's that simple.

পাওয়ারশেলে npm এর কাজ শেষ হয়ে গেলে আমরা, package.json আবার ওপেন করি । ওপেন করে সেই **ডিপেনডেন্সি** সেকশনে একটু ঢু মারি । দেখি কি আছে । ওমা!! । এতো দেখি আমাদের এক্সপ্রেস ভাই এবং তার ভার্সন নাম্বার । 


***সেম ভাবে বাকি দুটো প্যাকেজ আপাতত ইন্সটল করে রাখি । তাদের কাজ চলতি পথে বলে দেয়া হবে***


```
npm install hbs dotenv
```

এটা পাওয়ারশেলে লিখে এন্টার চাপ দেই এবং ইন্সটলিং শেষ হওয়ার জন্য অপেক্ষা করি 

 
### First Code. Firing up server


 আমাদের নেটওয়ার্ক মডেলটা হচ্ছে ক্লায়েন্ট - সার্ভার মডেল । যেহেতু আমরাই কোড করবো আবার আমরাই টেস্ট করবো, সেহেতু আমরাই ক্লায়েন্ট, আবার আমরাই  সার্ভার

 বর্তমানে আমাদের SimpleServer  ফোল্ডারের অবস্থা নিচের মতো 

node_modules

package.json

public/

routes/

views/


এখন এই ফোল্ডারের ভেতর আমরা একটা ফাইল তৈরী করি যার নাম হবে,  **app.js**


*ফাইল বানানোর পর ফোল্ডারের অবস্থা হবে নিচের মতো*

node_modules

package.json

app.js

public/

routes/

views/


এখন আমরা আমাদের পাওয়ারশেলে এই কমান্ডটা লিখি এবং এন্টার চাপ দেই

```
code .
```

code মানে হচ্ছে আমরা চাচ্ছি visual studio code রান করতে এবং পরের .(dot) টা দিয়ে বুঝাচ্ছি কারেন্ট ডিরেক্টরিতে আমরা vscode রান করতে চাচ্ছি 


vscode রান হওয়ার পর বামে থেকে app.js সিলেক্ট করি আর নিচের কোডগুলো লিখি 

```
const express = require('express')
const hbs = require('hbs')
const path = require('path')
require('dotenv').config()
```


require জাভাস্ক্রিপ্টের নিজস্ব ফাংশন । এটির মাধ্যমে আমরা যেসব প্যাকেজ ইন্সটল করেছি সেসব আমাদের প্রজেক্টে ইনক্লুড করতে পারি  । এইখানে আমরা express, hbs, path এবং dotenv ইনক্লুড করছি । 


আগেই জেনেছি এক্সপ্রেস হচ্ছে আমাদের ওয়েবফ্রেমওয়ার্ক । সো, আমাদের যত এন্ডপয়েন্ট তৈরী করা বা সার্ভার রান করা, সব করবে এক্সপ্রেস  । তার জন্য এক্সপ্রেস এর একটি ইন্সট্যান্স আমরা, app নামক ভ্যারিয়েবলে রাখি ।


```
let app = express()
```


এখন একটি Random পোর্ট নাম্বার সিলেক্ট করি । আমি নিলাম ৫০০০  । নিয়ে সেটাকে একটা ভ্যারিয়েবলে রাখি ।

```
const port = 5000
```

এখন আমরা চাই আমাদের সার্ভার পোর্ট ৫০০০ এ চলবে  । যাতে ইউজার(ক্লায়েন্ট), ৫০০০ পোর্টে ঢুকলে আমাদের ওয়েব এপটি পায় 


এরজন্য আমরা ব্যবহার করবো এক্সপ্রেস এর listen মেথড । আগেই এক্সপ্রেস এর ইন্সট্যান্স রেখেছি app নামক ভ্যারিয়েবলে । এখন, app.listen() ফাংশনে ফার্স্ট আর্গুমেন্ট হিসেবে দিবো পোর্ট নাম্বার , এবং সেকেন্ড আর্গুমেন্টে দিবো একটি কলব্যাক ফাংশন 

কলব্যাক ফাংশন হচ্ছে একটা Technique যার মাধ্যেমে আমরা এসিনক্রোনাস কোডকে সিনক্রোনাস কোডে রুপান্তর করতে পারি ।

```
app.listen(port, ()=>{
    console.log(`server running on port ${port}`)
})
```

